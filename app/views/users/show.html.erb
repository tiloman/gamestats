<h1><%= @user.vorname %></h1>
<%= image_tag (@user.avatar.url(:medium)), class:'avatar_big' %>
<br />

Score:
<%= @user.score %>
<br />
Verlorene Duelle
<%= @user.lost_matches %>
<br />

Gewonnene Duelle
<%= @user.won_matches %>
<br />

Matches:<br>
<% i = 1 %>
<% score = 1000 %>
<% hash = {} %>

<%= javascript_include_tag "https://www.gstatic.com/charts/loader.js" %>

<% @my_matches.each do |match| %>

  <% player1 = User.find(match.player1) %>
  <% player2 = User.find(match.player2) %>
  <%= i %>
  <%= date_format(match.created_at) %>

  <% if player1 == @user %>
    <%= player2.vorname %>
    <% if match.scoreplayer1 > match.scoreplayer2 %>
      Verloren
      <% score = score + (match.scoreplayer2 - match.scoreplayer1) %>
      <% hash.store(i, score) %>
    <% else %>
      Gewonnen
      <% score = score + (match.scoreplayer2 + match.scoreplayer1) %>
      <% hash.store(i, score) %>
    <% end %>
  <% elsif player2 == @user %>
    <%= player1.vorname %>
    <% if match.scoreplayer1 > match.scoreplayer2 %>
      Gewonnen
      <% score = score + (match.scoreplayer1+ match.scoreplayer2) %>
      <% hash.store(i, score) %>

    <% else %>
      Verloren
      <% score = score + (match.scoreplayer1- match.scoreplayer2) %>
      <% hash.store(i, score) %>

    <% end %>

  <% end %>
<% i = i + 1 %>
  <br>
<% end %>

<br>

<%= area_chart hash, {library: {hAxis: {title: "Spiele"}, vAxis: {title: "Score"}}}  %>
